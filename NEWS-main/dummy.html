<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Info Stream</title>
<!-- favicon -->
<link rel="icon" type="image/png" href="/img/favicon.png" sizes="32x32">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<!-- Local CSS -->
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


<!-- Breaking News Ticker CSS -->
<style>
#breaking-news {
background-color: #f8f9fa;
padding: 5px 0;
text-align: center;
font-weight: bold;
color: #dc3545;
}
</style>
</head>

<body>
    
    <div id="google_translate_element"></div>
<!-- Breaking News Ticker
<div id="breaking-news">
<marquee behavior="scroll" direction="left" scrollamount="8">
Breaking News: Chandrayan-3 sucessfully launched on the southpole of the moon
</marquee>
</div>
Bootstrap Navbar -->
<nav id="navbar">
<nav class="navbar navbar-dark navbar-expand-lg bg-dark">
<div class="container-fluid">
    
<a class="navbar-brand" href="#">Info Stream</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
<a class="nav-link active" aria-current="page" onclick="getNews('all')"href ="#">Home</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
data-bs-toggle="dropdown" aria-expanded="false">
<span id="selectedCategory">Category</span>
</a>
<ul id="webList" class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="#">National</a></li>
<li><a class="dropdown-item" href="#">Business</a></li>
<li><a class="dropdown-item" href="#">Sports</a></li>
<li><a class="dropdown-item" href="#">World</a></li>
<li><a class="dropdown-item" href="#">Politics</a></li>
<li><a class="dropdown-item" href="#">Technology</a></li>
<li><a class="dropdown-item" href="#">Startup</a></li>
<li><a class="dropdown-item" href="#">Entertainment</a></li>
<li><a class="dropdown-item" href="#">Miscellaneous</a></li>
<li><a class="dropdown-item" href="#">Hatke</a></li>
<li><a class="dropdown-item" href="#">Science</a></li>
<li><a class="dropdown-item" href="#">Automobile</a></li>
</ul>
</li>
</ul>
<button id="hindiBtn" class="btn btn-secondary">हिंदी</button>
<button id="malayalamBtn">Malayalam</button>
<div class="input-group" style="display: flex; align-items: flex-end;">
<input type="text" id="locationInput" class="form-control" placeholder="&#xf279; location"
aria-label="Enter a location" aria-describedby="getNewsBtn" style="height: 30px; width: 120px; flex: 1;">

<button class="btn btn-primary" type="button" id="locationBtn" style="height: 30px;">Get News</button>
</div>
<div style="width: 10px;"></div>
<!--- <input type="date" id="datepicker" class="form-control me-2" placeholder="calendar" name="calendar" style="width: 120px; height: 15px;">-->
<div class="input-group-append">
<span class="input-group-text" id="calendarButton">
<i class="fas fa-calendar-alt"></i>
</span>
</div>
<div id="calendarContainer"></div>
<div style="width: 10px;"></div>
<button class="btn btn-outline-success" id="voiceSearchBtn">
<i class="fas fa-microphone"></i>
</button>
<div style="width: 10px;"></div>
<form class="profile">
    <a href='profile.php' class="profile-button">
        <img src="image1.jpeg" alt="Profile Picture" class="profile-picture">
    </a>
</form>

</div>
</div>
</nav>
</nav>
<!-- Basic Header -->
<div class="head container">
<h3>Top News <span class="badge text-bg-secondary">INNOV TECH SQUAD</span></h3>
<span class="line"></span>
<!-- Search Bar -->
<form class="d-flex">
<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
<button class="btn btn-outline-success" type="submit">Search</button>
</form>
</div>
<!-- News Content -->
<div id="newsBox" class="container"></div>
<div id="spinner" class="mySpin spinner-border text-warning"></div>
<!-- Footer
<footer id="sticky-footer" class="flex-shrink-0 py-2 bg-dark text-white-50">
<div class="container text-center">
<small>Copyright &copy;2022 &nbsp; Hardik Desai</small>
</div>
</footer-->
<!-- JavaScript -->
<script src="app2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/google-translate-api"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<!-- Include the Google Translate API script -->
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
crossorigin="anonymous"></script>
<script>
    function googleTranslateElementInit() {
    new google.translate.TranslateElement(
        { pageLanguage: 'en', includedLanguages: 'hi', layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
        'google_translate_element'
    );
}
</script>
<select id="languageSelect">
    <option value="en">English</option>
    <option value="hi">Hindi</option>
    <!-- Add more language options as needed -->
  </select>

<script>
    // Add an event listener to the language select element
const languageSelect = document.getElementById('languageSelect');
languageSelect.addEventListener('change', function () {
  const selectedLanguage = this.value; // Get the selected language
  console.log("Selected Language:", selectedLanguage); // Add this line to check the selected language
  const selectedCategory = selectedCategoryElement.textContent.toLowerCase();
  
  // Call the getNews function with the selected language and category
  getNews(selectedCategory, selectedLanguage);
});


// Modify the getNews function to accept the language parameter
function getNews(category, language) {
  spinner.style.visibility = 'visible';
  newsBox.style.visibility = 'hidden';

  const apiUrl = `https://newsapi.org/v2/top-headlines?country=us&category=${category}&apiKey=${apiKey}&language=${language}`;
console.log("API URL:", apiUrl); // Add this line to check the constructed URL

  // Send the API request
  xhr.open('GET', apiUrl, true);
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      const data = JSON.parse(xhr.responseText);
      updateNewsContent(data);
    } else if (xhr.readyState === 4) {
      console.log("Error fetching news");
    }
  }
  xhr.send();
}

</script>
</body>

</html>l